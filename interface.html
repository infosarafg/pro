<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© â€” System RestorOn</title>
  <style>
    /* --- Basic Reset --- */
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Segoe UI", Tahoma, Arial, sans-serif; }
    html,body { height: 100%; background: #f5f7fb; color:#0f1724; }
    a { color: inherit; text-decoration: none; }

    /* --- Layout --- */
    .app { display: grid; grid-template-columns: 260px 1fr; gap: 20px; min-height:100vh; padding:20px; }
    @media (max-width:900px){ .app{ grid-template-columns: 1fr; } .sidebar{ position:relative; } .topbar { margin-top: 10px; } }

    /* --- Sidebar --- */
    .sidebar {
      background: linear-gradient(180deg,#0ea5a4 0%, #0284c7 100%);
      color: #fff;
      border-radius: 16px;
      padding: 18px;
      display:flex; flex-direction:column; gap:16px;
      box-shadow: 0 8px 20px rgba(2,6,23,0.08);
      height: fit-content;
    }
    .brand { display:flex; align-items:center; gap:12px; font-weight:700; font-size:18px; }
    .brand .logo { width:44px; height:44px; border-radius:10px; background:rgba(255,255,255,0.12); display:flex; align-items:center; justify-content:center; }
    .nav { display:flex; flex-direction:column; gap:8px; margin-top:6px; }
    .nav a { padding:10px 12px; border-radius:10px; display:flex; align-items:center; gap:10px; font-weight:600; color:rgba(255,255,255,0.95); }
    .nav a.active, .nav a:hover { background: rgba(255,255,255,0.08); }

    /* --- Main content --- */
    .main { display:flex; flex-direction:column; gap:18px; }
    .topbar { display:flex; justify-content:space-between; align-items:center; gap:12px; padding:12px 18px; background:#fff; border-radius:12px; box-shadow: 0 6px 18px rgba(2,6,23,0.04); }
    .search { display:flex; align-items:center; gap:8px; padding:8px; background:#f1f5f9; border-radius:10px; min-width:240px; }
    .search input { border:0; background:transparent; outline:none; font-size:14px; padding:6px; }

    /* --- Stats cards --- */
    .cards { display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
    @media (max-width:900px){ .cards{ grid-template-columns: repeat(1,1fr); } }
    .card { background:#fff; padding:14px; border-radius:12px; box-shadow:0 6px 16px rgba(2,6,23,0.04); display:flex; justify-content:space-between; align-items:center; gap:12px; }
    .card .num { font-size:20px; font-weight:800; }
    .card .label { font-size:13px; color:#475569; }

    /* --- Grid area for table + form --- */
    .grid { display:grid; grid-template-columns: 1fr 360px; gap:12px; }
    @media (max-width:1100px){ .grid{ grid-template-columns: 1fr; } }

    /* --- Table --- */
    .panel { background:#fff; border-radius:12px; padding:14px; box-shadow:0 6px 18px rgba(2,6,23,0.04); }
    table { width:100%; border-collapse: collapse; font-size:14px; }
    th, td { padding:10px 8px; text-align:right; border-bottom:1px solid #f1f5f9; }
    th { font-size:13px; color:#475569; font-weight:700; text-transform:uppercase; }
    .status { font-weight:700; padding:6px 10px; border-radius:999px; font-size:12px; display:inline-block; }
    .status.pending { background:#fff7ed; color:#b45309; }
    .status.done { background:#ecfeff; color:#065f46; }
    .btn { display:inline-block; padding:8px 12px; border-radius:8px; background:#0284c7; color:#fff; font-weight:700; cursor:pointer; border:0; }

    /* --- Form --- */
    .form-group { display:flex; flex-direction:column; gap:6px; margin-bottom:10px; }
    label { font-size:13px; color:#334155; }
    input[type="text"], input[type="number"], textarea, select {
      padding:10px; border-radius:8px; border:1px solid #e6eef7; outline:none; font-size:14px; background:#fcfeff;
    }
    textarea { resize:vertical; min-height:80px; }

    /* --- small helpers --- */
    .muted { color:#64748b; font-size:13px; }
    .row { display:flex; gap:8px; align-items:center; }
    .avatar { width:40px; height:40px; border-radius:10px; background:#f1f5f9; display:flex; align-items:center; justify-content:center; font-weight:800; color:#0f1724; }
  </style>
</head>
<body>
  <div class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar" aria-label="Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ">
      <div class="brand">
        <div class="logo">ğŸ½</div>
        <div>
          <div>System RestorOn</div>
          <div class="muted" style="font-size:12px;margin-top:4px;">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
        </div>
      </div>

      <nav class="nav" aria-label="Ù‚Ø§Ø¦Ù…Ø©">
        <a href="#" class="active">Ø§Ù„Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
        <a href="#" onclick="showSection('orders')">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
        <a href="#" onclick="showSection('menu')">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…</a>
        <a href="#" onclick="showSection('settings')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
      </nav>

      <div style="margin-top:auto;">
        <div class="muted" style="font-size:13px;">Ù…Ø³ØªØ®Ø¯Ù…</div>
        <div class="row" style="margin-top:8px;">
          <div class="avatar">Ø³</div>
          <div>
            <div style="font-weight:700;">Ø³Ø§Ø±Ø© Ø¹Ø²ÙˆØ²</div>
            <div class="muted" style="font-size:12px;">Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <!-- TOPBAR -->
      <div class="topbar">
        <div class="search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#64748b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input id="searchInput" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ø·Ù„Ø¨ØŒ ØµÙ†ÙØŒ Ø¹Ù…ÙŠÙ„..." />
        </div>
        <div style="display:flex; gap:10px; align-items:center;">
          <button class="btn" onclick="refresh()">ØªØ­Ø¯ÙŠØ«</button>
        </div>
      </div>

      <!-- CARDS -->
      <div class="cards">
        <div class="card">
          <div>
            <div class="num" id="totalOrders">--</div>
            <div class="label">Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
          </div>
          <div class="muted">ğŸ“¦</div>
        </div>

        <div class="card">
          <div>
            <div class="num" id="pendingOrders">--</div>
            <div class="label">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
          </div>
          <div class="muted">â³</div>
        </div>

        <div class="card">
          <div>
            <div class="num" id="revenue">-- Ø¯Ø¬</div>
            <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
          </div>
          <div class="muted">ğŸ’°</div>
        </div>
      </div>

      <!-- GRID: TABLE + FORM -->
      <div class="grid">
        <!-- ORDERS TABLE -->
        <section class="panel" id="ordersSection">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
            <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©</h3>
            <div class="muted">ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø±: <span id="lastUpdated">--</span></div>
          </div>

          <table id="ordersTable" aria-label="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª">
            <thead>
              <tr>
                <th>Ø±Ù‚Ù…</th>
                <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
              </tr>
            </thead>
            <tbody>
              <!-- rows injected by JS -->
            </tbody>
          </table>
        </section>

        <!-- FORM / MENU MANAGEMENT -->
        <aside class="panel" id="menuSection">
          <h3>Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯</h3>
          <p class="muted" style="margin-bottom:12px;">Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø«Ù… Ø§Ø¶ØºØ· Ø­ÙØ¸.</p>

          <div>
            <div class="form-group">
              <label>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</label>
              <input id="itemName" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±Ø¬Ø±ÙŠØªØ§" />
            </div>

            <div class="form-group">
              <label>Ø§Ù„Ø³Ø¹Ø± (Ø¯Ø¬)</label>
              <input id="itemPrice" type="number" placeholder="Ù…Ø«Ø§Ù„: 1200" />
            </div>

            <div class="form-group">
              <label>Ø§Ù„ÙˆØµÙ</label>
              <textarea id="itemDesc" placeholder="ÙˆØµÙ Ø§Ù„ØµÙ†Ù..."></textarea>
            </div>

            <div style="display:flex; gap:8px;">
              <button class="btn" onclick="addMenuItem()">Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù</button>
              <button style="padding:8px 12px;border-radius:8px;background:#e2e8f0;border:0;font-weight:700;cursor:pointer;" onclick="loadMenu()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
            </div>

            <hr style="margin:12px 0;border:none;border-top:1px solid #f1f5f9;" />

            <h4 style="margin-bottom:8px;">Ø±ÙˆØ§Ø¨Ø· Ù…ÙÙŠØ¯Ø©</h4>
            <div class="muted" style="font-size:13px;">
              API: <code>/api/orders</code>, <code>/api/menu</code><br/>
              Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: JSON (POST/GET/PUT/DELETE)
            </div>
          </div>
        </aside>
      </div>
    </main>
  </div>

  <!-- --- JS: Frontend logic + examples of fetch to backend --- -->
  <script>
    // ---------- Utility: show section ----------
    function showSection(name){
      document.getElementById('ordersSection').style.display = name === 'orders' ? 'block' : 'block';
      // for now we don't hide main sections to keep simple -- you can customize
    }

    // ---------- Mock / real: base API URL ----------
    // Ø¥Ø°Ø§ Ù„Ø¯ÙŠÙƒ Ø³ÙŠØ±ÙØ± Ù…Ø­Ù„ÙŠ ØºÙŠØ± Ø°Ù„Ùƒ ØºÙŠÙ‘Ø± BASE_URL
    const BASE_URL = ''; // Ù…Ø«Ø§Ù„: 'http://localhost:3000'

    // ---------- Render orders ----------
    async function fetchOrders(){
      try {
        const res = await (BASE_URL ? fetch(BASE_URL + '/api/orders') : Promise.resolve({ ok:true, json: async ()=> mockOrders() }));
        if (!res.ok) throw new Error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª');
        const orders = await res.json();
        renderOrders(orders);
      } catch (err) {
        console.error(err);
        alert('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª â€” Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©');
        renderOrders(await mockOrders());
      }
    }

    function renderOrders(orders){
      const tbody = document.querySelector('#ordersTable tbody');
      tbody.innerHTML = '';
      let total = 0, pending = 0;
      orders.forEach((o, idx) => {
        total += o.total;
        if (o.status === 'pending') pending++;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${o.id}</td>
          <td>${o.customer}</td>
          <td>${o.total} Ø¯Ø¬</td>
          <td><span class="status ${o.status==='done' ? 'done' : 'pending'}">${o.status === 'done' ? 'Ù…ÙƒØªÙ…Ù„' : 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±'}</span></td>
          <td>
            <button class="btn" onclick="markDone(${o.id})">ØªÙ…</button>
            <button style="margin-left:6px;padding:6px 8px;border-radius:8px;border:1px solid #e6eef7;background:#fff;cursor:pointer;" onclick="deleteOrder(${o.id})">Ø­Ø°Ù</button>
          </td>
        `;
        tbody.appendChild(tr);
      });

      document.getElementById('totalOrders').textContent = orders.length;
      document.getElementById('pendingOrders').textContent = pending;
      document.getElementById('revenue').textContent = total + ' Ø¯Ø¬';
      document.getElementById('lastUpdated').textContent = new Date().toLocaleString('ar-DZ');
    }

    // ---------- Actions ----------
    async function markDone(id){
      // Ù…Ø«Ø§Ù„ Ø§ØªØµØ§Ù„ Ù„Ø¨Ø§Ùƒ Ø§Ù†Ø¯:
      try {
        if (BASE_URL) {
          const res = await fetch(BASE_URL + '/api/orders/' + id + '/complete', { method: 'POST' });
          if (!res.ok) throw new Error();
        } else {
          console.log('Mock: marking done', id);
        }
        refresh();
      } catch {
        alert('ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©');
      }
    }

    async function deleteOrder(id){
      if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… ' + id + 'ØŸ')) return;
      try {
        if (BASE_URL) {
          const res = await fetch(BASE_URL + '/api/orders/' + id, { method: 'DELETE' });
          if (!res.ok) throw new Error();
        } else {
          console.log('Mock: delete', id);
        }
        refresh();
      } catch {
        alert('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨');
      }
    }

    // ---------- Menu management ----------
    async function addMenuItem(){
      const name = document.getElementById('itemName').value.trim();
      const price = Number(document.getElementById('itemPrice').value);
      const desc = document.getElementById('itemDesc').value.trim();
      if(!name || !price){ alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø³Ø¹Ø±'); return; }

      const payload = { name, price, description: desc };

      try {
        if (BASE_URL) {
          const res = await fetch(BASE_URL + '/api/menu', {
            method: 'POST',
            headers: { 'Content-Type':'application/json' },
            body: JSON.stringify(payload)
          });
          if (!res.ok) throw new Error();
        } else {
          console.log('Mock add menu item:', payload);
        }
        alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù');
        document.getElementById('itemName').value = '';
        document.getElementById('itemPrice').value = '';
        document.getElementById('itemDesc').value = '';
      } catch {
        alert('ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù');
      }
    }

    async function loadMenu(){
      try {
        if (BASE_URL) {
          const res = await fetch(BASE_URL + '/api/menu');
          if (!res.ok) throw new Error();
          const menu = await res.json();
          console.log(menu);
          alert('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© â€” Ø§ÙØ­Øµ Ø§Ù„Ù€ console.');
        } else {
          console.log('Mock menu loaded', await mockMenu());
          alert('Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙÙŠ console.');
        }
      } catch {
        alert('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©');
      }
    }

    // ---------- Refresh ----------
    function refresh(){
      fetchOrders();
    }

    // ---------- Mock data (Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¯ÙˆÙ† Ø³ÙŠØ±ÙØ±) ----------
    async function mockOrders(){
      return [
        { id: 101, customer: 'Ø£Ø­Ù…Ø¯', total: 1250, status: 'pending' },
        { id: 102, customer: 'Ù„ÙŠÙ„Ù‰', total: 980, status: 'done' },
        { id: 103, customer: 'ÙŠÙˆØ³Ù', total: 1450, status: 'pending' }
      ];
    }
    async function mockMenu(){
      return [{ name:'Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±Ø¬Ø±ÙŠØªØ§', price:1200 }, { name:'Ø³Ù„Ø·Ø© Ø®Ø¶Ø±Ø§Ø¡', price:450 }];
    }

    // ---------- inizialize ----------
    fetchOrders();
  </script>
</body>
</html>
